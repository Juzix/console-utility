#include "base.h"
#include <iostream>
#include <string.h>
#include <iomanip>
#include <limits>


using namespace std;


int main()
{
	const int MAX_LEN = 2048;
	char *p = "F901FD808504E3B292008502540BE3FF941176FD5DC45001002EB2B893E5EF7C488475640780B901D4B1498E290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000018A7B226964223A227371732D31222C226E616D65223A22535153222C22706172656E744964223A2261646D696E222C226465736372697074696F6E223A22626C6F636B636861696E20706C6174222C22636F6D6D6F6E4E616D65223A225465737431222C2273746174654E616D65223A224744222C22636F756E7472794E616D65223A22434E222C22656D61696C223A227465737431403132362E636F6D222C2274797065223A312C22656E6F64654C697374223A5B7B227075626B6579223A2230783331643137376235623261626133396531633330366331623333383334643234356538356435373763343332366237363162373334323365636139303063616536366638376432333430633135356634303238353832303663396533656566653830376363323433616636323864623138363064393965373132653535343862222C226970223A223139322E3136382E31302E3335222C22706F7274223A223130303031227D5D2C22726F6C6549644C697374223A5B5D2C2266696C6549644C697374223A5B5D7D0000000000001C8080";
	BYTE src[MAX_LEN];
	memset((void *)src, 0, MAX_LEN);
	int length = strlen(p);
	for (size_t i = 0; i < length; i+=2)
	{
		int a = (p[i] >= '0' && p[i] <= '9') ? (p[i] - '0') : (p[i] - 'A' + 10);
		int b = (p[i+1] >= '0' && p[i+1] <= '9') ? (p[i+1] - '0') : (p[i+1] - 'A' + 10);
		src[i / 2] = a * 16 + b;
	}
	
	BYTE dest[MAX_LEN];
	memset((void *)dest, 0, MAX_LEN);
	DWORD len = 0;

	cout << p << endl;


	web3RlpRemoveVRS((const BYTE *)src, dest, &len);
	for (size_t i = 0; i < len; i++)
	{
		if ((int)dest[i]<15) cout << "0";
		cout << hex << (int)dest[i];
	}

	cout << endl << " len = " << len <<endl;
	return 0;
}